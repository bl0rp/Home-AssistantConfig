###############################################################################################################
# SENSOR:                                                                                                     #
###############################################################################################################

###############################################################################################################
#TimeDate
  - platform: time_date
    display_options:
      - 'time'
      - 'date'
      - 'date_time'
      - 'time_date'
      - 'time_utc'
      - 'beat'
#Wetter yr.no (translation in customize.yaml)
  - platform: yr
    monitored_conditions:
        - temperature
        - symbol
        - precipitation
        - windSpeed
        - pressure
        - humidity
        - fog
        - cloudiness
        - dewpointTemperature
#Moon
  - platform: moon

#bitcoin data
  - platform: bitcoin
    display_options:
      - exchangerate
      - btc_mined
      - market_price_usd

#speedtest
  - platform: speedtest
    monitored_conditions:
      - ping
      - download
      - upload

#commandline sensors
  - platform: command_line
    name: CPU Temperature
    command: "cat /sys/class/thermal/thermal_zone0/temp"
    unit_of_measurement: "°C"
    value_template: '{{ value|int // 1000 }}'

  - platform: command_line
    scan_interval: 3600
    command: python3 -c "import requests; print(requests.get('https://pypi.python.org/pypi/homeassistant/json').json()['info']['version'])"
    name: HA release

#  - platform: command_line
#    scan_interval: 30
#    command: /home/homeassistant/script/check_ping.sh
#    name: Ping Check Test

#  - platform: command_line
#    scan_interval: 60
#    command: /home/homeassistant/script/check_autossh.sh
#    name: autossh

#  - platform: command_line
#    scan_interval: 60
#    command: /home/homeassistant/script/check_dhcpd.sh
#    name: dhcpd

#  - platform: command_line
#    scan_interval: 60
#    command: /home/homeassistant/script/check_sshd.sh
#    name: sshd

#sabnzbd status
  - platform: sabnzbd
    host: 192.168.0.29
    port: 8085
    api_key: !secret sabnzbd_api
    monitored_variables:
      - 'current_status'
      - 'speed'
      - 'queue_size'
      - 'queue_remaining'
      - 'disk_size'
      - 'disk_free'

#Systemmonitor
  - platform: systemmonitor
    resources:
      - type: disk_use_percent
        arg: /
      - type: disk_use
        arg: /
      - type: disk_free
        arg: /
      - type: memory_use_percent
      - type: memory_use
      - type: memory_free
      - type: processor_use
      - type: load_1m
      - type: load_5m
      - type: load_15m
      - type: swap_use_percent
      - type: swap_use
      - type: swap_free
      - type: last_boot
      - type: since_last_boot
      - type: network_in
        arg: eth0
      - type: network_out
        arg: eth0
      - type: packets_in
        arg: eth0
      - type: packets_out
        arg: eth0
      - type: ipv4_address
        arg: eth0
      - type: ipv6_address
        arg: eth0
      - type: process
        arg: sshd
      - type: process
        arg: dhcpd
      - type: process
        arg: autossh

#Google travel time
  - platform: google_travel_time
    name: Zuhause -> Marienhospital
    api_key: !secret google_traveltime_apikey
    origin: zone.home
    destination: place_id:ChIJHSlDllnbmUcRFTau-VG69RA

  - platform: google_travel_time
    name: Zuhause -> Hauptrettungswache
    api_key: !secret google_traveltime_apikey
    origin: zone.home
    destination: Neckarstraße 143, Stuttgart, Germany

  - platform: google_travel_time
    name: Stuttgart -> Berlin
    api_key: !secret google_traveltime_apikey
    origin: zone.home
    destination: Berlin, Germany

  - platform: google_travel_time
    name: Daheim -> ZWA
    api_key: !secret google_traveltime_apikey
    origin: zone.home
    destination: Leibnizstraße 31, Stuttgart, Germany

#sensor imap
  - platform: imap
    server: !secret imap_host
    port: 993
    name: 0x711.de ungelese E-Mails
    username: !secret imap_user
    password: !secret imap_pw

#template
  - platform: template
    sensors:
      solar_angle:
        value_template: '{{ states.sun.sun.attributes.elevation }}'
        friendly_name: 'Sun angle'
        unit_of_measurement: 'degrees'
      sunrise:
        value_template: '{{ states.sun.sun.attributes.next_rising }}'
### home->Online für landev
      technicolor:
        friendly_name: 'Unitymedia Technicolor Router'
        value_template: "{{ 'Online' if is_state('device_tracker.technicolor', 'home') else 'Offline' }}"
      ddwrt:
        friendly_name: 'DD-WRT Router 1.OG'
        value_template: "{{ 'Online' if is_state('device_tracker.ddwrt', 'home') else 'Offline' }}"
      qnap1:
        friendly_name: 'QNAP TS-563'
        value_template: "{{ 'Online' if is_state('device_tracker.qnap1', 'home') else 'Offline' }}"
      pi1wlan:
        friendly_name: 'RaspberryPi 1 via WLAN'
        value_template: "{{ 'Online' if is_state('device_tracker.pi1wlan', 'home') else 'Offline' }}"
      pi1eth:
        friendly_name: 'RaspberryPi 1 via Ethernet'
        value_template: "{{ 'Online' if is_state('device_tracker.pi1eth', 'home') else 'Offline' }}"
      pi2kodi:
        friendly_name: 'RaspberryPi 2 (Kodi)'
        value_template: "{{ 'Online' if is_state('device_tracker.pi2kodi', 'home') else 'Offline' }}"
      chmbp:
        friendly_name: 'MacBook Pro'
        value_template: "{{ 'Online' if is_state('device_tracker.chmbp', 'home') else 'Offline' }}"
      ipad:
        friendly_name: 'iPad'
        value_template: "{{ 'Online' if is_state('device_tracker.ipad', 'home') else 'Offline' }}"
      nexus7:
        friendly_name: 'Nexus Tablet'
        value_template: "{{ 'Online' if is_state('device_tracker.nexus7', 'home') else 'Offline' }}"
      wemoswitch1:
        friendly_name: 'Wemo Switch 1'
        value_template: "{{ 'Online' if is_state('device_tracker.wemoswitch1', 'home') else 'Offline' }}"
      wemoswitch2:
        friendly_name: 'Wemo Switch 2'
        value_template: "{{ 'Online' if is_state('device_tracker.wemoswitch2', 'home') else 'Offline' }}"
### systemmonitor
      process_sshd_format:
        friendly_name: 'SSH Daemon'
        value_template: "{{ 'running' if is_state('sensor.process_sshd', 'on') else 'stopped' }}"
        icon_template: '{% if is_state("sensor.process_sshd", "on") %}mdi:checkbox-marked-circle-outline{% else %}mdi:alert{% endif %}'
      process_autossh_format:
        friendly_name: 'autossh tunnel script'
        icon_template: '{% if is_state("sensor.process_autossh", "on") %}mdi:checkbox-marked-circle-outline{% else %}mdi:alert{% endif %}'
        value_template: "{{ 'running' if is_state('sensor.process_autossh', 'on') else 'stopped' }}"
      process_dhcpd_format:
        friendly_name: 'DHCPD Daemon'
        icon_template: '{% if is_state("sensor.process_dhcpd", "on") %}mdi:checkbox-marked-circle-outline{% else %}mdi:alert{% endif %}'
        value_template: "{{ 'running' if is_state('sensor.process_dhcpd', 'on') else 'stopped' }}"
#MPD Dose
      mpd_use:
        friendly_name: Steckdose in Benutzung?
        value_template: "{{ states('sensor.fibaro_system_fgwpef_wall_plug_gen5_power_3_4') | int > 0.2 }}"

#qnap systemmonitor
  - platform: qnap
    host: !secret qnap_ip
    username: !secret qnap_user
    password: !secret qnap_pw
    nics: eth0
    monitored_conditions:
      - status
      - cpu_temp
      - cpu_usage
      - memory_free
      - memory_used
      - memory_percent_used
      - network_link_status
      - network_tx
      - network_rx
      - drive_smart_status
      - drive_temp
      - volume_size_free
