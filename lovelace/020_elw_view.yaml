path: elw
title: ELW
cards:
- type: vertical-stack
  cards:

    - type: entities
      title: Licht ELW
      show_header_toggle: false
      entities:
      - type: section
      - entity: input_select.elw_scene
      - entity: input_select.tuerlicht
      - entity: automation.motion_zwave_sunset_flur_dimlight
    - type: grid
      columns: 2
      square: false
      cards:
        - type: custom:slider-button-card
          entity: light.schlafzimmer
          icon:
            show: true
            icon: mdi:globe-light
            use_state_color: true
        - type: custom:slider-button-card
          entity: light.flur
          icon:
            show: true
            icon: mdi:wall-sconce-round
            use_state_color: true
    - type: grid
      columns: 3
      square: false
      cards:
        - type: custom:slider-button-card
          entity: switch.11011_a
        - type: custom:slider-button-card
          entity: switch.11001_c
        - type: custom:slider-button-card
          entity: switch.11011_b
          name: Schreibtisch




- type: vertical-stack
  cards:
    - type: entities
      title: Temperatur und Luftfeuchtigkeit
      show_header_toggle: false
      entities:
      - type: section
        label: Außentempertur
      - entity: sensor.esp32_02_temperature
        secondary_info: last-changed
      - entity: sensor.esp32_03_temperature
        secondary_info: last-changed
      - type: section
        label: Innentemperatur & Luftqualität
      - entity: sensor.esp32_06_co2
        name: CO2
        type: custom:template-entity-row
        state: "{{ states(config.entity) | round(2) }} ppm"
        icon: |
          {% if states(config.entity) | float > 800 %}
             mdi:emoticon-dead-outline
          {% elif states(config.entity) | float < 550 %}
             mdi:emoticon-happy-outline
          {% else %}
             mdi:emoticon-neutral-outline
          {% endif %}
        card_mod:
          style: |
            {% if states(config.entity) | float > 800 %}
               :host {
                 --paper-item-icon-color: red;
                 color: red
               }
            {% elif states(config.entity) | float < 550 %}
               :host {
                 --paper-item-icon-color: green;
                 color: green
               }
            {% else %}
               :host {
                 --paper-item-icon-color: yellow;
                 color: yellow
               }
            {% endif %}
      - entity: sensor.esp8266_02_temperature
        name: ELW Regal
        type: custom:template-entity-row
        state: "{{ states(config.entity) | round(2) }} °C"
        secondary: "{{ relative_time(states[config.entity].last_changed) }}"
        icon: |
          {% if states(config.entity) | float > 23 %}
             mdi:thermometer-alert
          {% elif states(config.entity) | float < 21 %}
             mdi:thermometer-chevron-down
          {% else %}
             mdi:thermometer
          {% endif %}
        card_mod:
          style: |
            {% if states(config.entity) | float > 23 %}
               :host {
                 --paper-item-icon-color: red;
                 color: red
               }
            {% elif states(config.entity) | float < 21 %}
               :host {
                 --paper-item-icon-color: blue;
                 color: blue
               }
            {% else %}
               :host {
                 --paper-item-icon-color: green;
                 color: green
               }
            {% endif %}
      - entity: sensor.esp8266_02_temperature
        name: ELW Regal
        secondary_info: last-changed
      - entity: sensor.aeotec_zw100_multisensor_6_temperature
        secondary_info: last-changed
      - entity: sensor.esp8266_06_temperature
        name: ELW Klo
        secondary_info: last-changed
      - type: custom:fold-entity-row
        head:
          type: section
          label: Luftfeuchtugkeit
        items:
          - sensor.esp32_02_humidity
          - sensor.esp32_03_humidity
          - sensor.esp8266_02_humidity
          - sensor.aeotec_zw100_multisensor_6_relative_humidity
          - sensor.esp8266_06_humidity
      - type: section
        label: Graph
      - type: custom:hui-history-graph-card
        hours_to_show: 24
        entities:
         - entity: sensor.esp8266_02_temperature
           type: column
           name: Office Humidity
           group_by:
             func: avg
             duration: 30min
         - entity: sensor.aeotec_zw100_multisensor_6_temperature
           name: Flur
         - entity: sensor.esp8266_06_temperature
           name: Klo
      - type: custom:mini-graph-card
        hours_to_show: 24
        hour24: true
        entities:
          - entity: sensor.aeotec_zw100_multisensor_6_temperature
            name: Flur
          - entity: sensor.esp8266_06_temperature
          - entity: sensor.esp8266_02_temperature
            name: Regal
        show:
          show_legend: true
          fill: false
          labels: true
          name: false
          state: false
          icon: false
          average: true
          extrema: true
          y_axis: secondary

    - type: entities
      title: Bewegungsmelder / Türsensor
      show_header_toggle: false
      entities:
      - type: section
      - entity: automation.benachrichtigung_aller_bewegunsgmelder_in_der_elw
        name: Alarme
        icon: 'mdi:alarm-bell'
      - entity: sensor.multisensor1_motion
        name: ELW Flur
        secondary_info: last-changed
      - entity: binary_sensor.esp8266_02_motion
        name: ELW
        secondary_info: last-changed
      - entity: binary_sensor.esp32_01_door_state
        name: Türe ELW
        secondary_info: last-changed
- type: vertical-stack
  cards:
    - type: entities
      title: Diverses
      show_header_toggle: false
      entities:
      - type: section
      - entity: person.christoph
        secondary_info: last-changed
      - entity: sensor.tasker_pixel4xl_battery
        name: Pixel4XL
        secondary_info: last-changed
      - entity: input_boolean.laundry_notify_christoph
      - type: section
        label: Ortung
      # - type: text
      #   entity: input_boolean.chrishome
      - entity: input_boolean.chrishome
        icon: 'mdi:map-marker-circle'
        name: Christoph Status
        secondary_info: last-changed
      - entity: device_tracker.user_devices_phone_christoph
        secondary_info: last-changed
        name: Christoph via nmap/unifi
        icon: 'mdi:wifi'
      - entity: device_tracker.p4xl
        secondary_info: last-changed
        name: GPSLogger Pixel4XL
        icon: 'mdi:radar'
      - entity: input_boolean.chrisbluetooth
        secondary_info: last-changed
        name: Christoph Bluetooth ELW
        icon: 'mdi:bluetooth'
      - type: section
      - entity: input_select.christoph_status
      - type: section
      - type: call-service
        icon: mdi:battery-charging-40
        name: Ladeautomatik
        action_name: Ausführen
        service: script.akkus_laden
